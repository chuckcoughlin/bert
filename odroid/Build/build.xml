<!-- Common ant routines intended for including in other scripts -->
<project name="ant.common" basedir=".">
	<property name="archive.dir" value="${basedir}/../Archive/mods" />
	<property name="build.version" value="1.0" />
	<property name="config.file" value="${basedir}/../Configuration/etc/bert.xml" />
	<property name="config.template" value="${basedir}/../Configuration/template/bert.xml" />
	<property name="jar.dir" location="${basedir}/../Archive/jars" />
	<property name="lib.dir" value="${basedir}/lib" />
	<property name="mod.dir" value="${basedir}/mods" />
	<property name="temp.dir" value="${basedir}/temp" />
	<property name="robot.dir" value="${bert.home}" />
	
	<tstamp>
		<format property="build.date" pattern="MM/dd/yyyy HH:mm" />
	</tstamp>
	
	<!-- Common path for building application code -->
	<path id="common-modulepath">
		<fileset dir="${lib.dir}">
	    	<include name="*.jar"/>
		</fileset>
		<fileset dir="${archive.dir}">
			<include name="*.jar"/>
		</fileset>
	 </path>
	
	<!-- This is an unmodularized jar -->
	<path id="antlr-classpath">
	   <pathelement location="${jar.dir}/antlr-4.7.1-complete.jar" />
	</path>
	
	<!-- Substitute placeholders in configuration file -->
	<target name="ReplacePlacehlders">
		<echo message="Substituting placeholders in ${result}" />
		<copy file="${template}" tofile="${result}" overwrite="true"/>
		<replace file="${result}" token="@RELEASE@" value="${build.version}" />
		<replace file="${result}" token="@DATE@" value="${build.date}" />
		<replace file="${result}" token="@PORT_HEAD@" value="/dev/serial_head" />
		<replace file="${result}" token="@PORT_LEFT_ARM@" value="/dev/serial_left_arm" />
		<replace file="${result}" token="@PORT_LEFT_LEG@" value="/dev/serial_left_leg" />
		<replace file="${result}" token="@PORT_RIGHT_ARM@" value="/dev/serial_right_arm" />
		<replace file="${result}" token="@PORT_RIGHT_LEG@" value="/dev/serial_right_leg" />
		<replace file="${result}" token="@PORT_TORSO@" value="/dev/serial_torso" />
	</target>
</project>