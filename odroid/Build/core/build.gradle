/*
 * This gradle file builds and installs the "core" C++ code.
 * gcc -march=armv8-a+crc
 */

plugins {
	id 'cpp'
}

model {
    buildTypes {
        debug
        release
    }
    toolChains {
		gcc(gcc) {
		  	getCCompiler().executable = 'arm-none-eabi-gcc'
  			getCppCompiler().executable = 'arm-none-eabi-c++'
  			getLinker().executable = 'arm-none-eabi-ld'
  			getAssembler().executable = 'arm-none-eabi-as'
        	path "/Users/chuckc/opt/gcc-arm-none-eabi-7-2018-q2/bin"
        }
    }
	platforms {
        arm {
            architecture "arm64"
			operatingSystem "linux"
        }
	}
    components {
        main(NativeExecutableSpec) {
			targetPlatform "arm"
            sources {
                cpp {
                    source {
                        srcDir "../../Core"
                        include "**/*.cpp"
                    }
                    }
                }
            }
        }
    }


/*
 * Copy the executable file to the robot
 */
task install {
	project.logger.info( "Installing ...")
}
